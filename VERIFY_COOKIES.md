# âœ… Verify Cookies Setup

## Step 1: Check if cookies.txt exists

```bash
cd /var/www/freereelsdownload
ls -la cookies.txt
```

**Should show:** File exists with permissions `-rw-------` (600)

## Step 2: Verify cookies file format

```bash
# Check first few lines (should start with # Netscape HTTP Cookie File)
head -5 cookies.txt
```

**Should show:**
```
# Netscape HTTP Cookie File
# This file was generated by...
.youtube.com	TRUE	/	TRUE	...
```

## Step 3: Test cookies with yt-dlp directly

```bash
cd /var/www/freereelsdownload
yt-dlp --cookies cookies.txt --js-runtimes node:/usr/bin/node -g -f "bestaudio/best" "https://youtube.com/shorts/jNQXAC9IVRw" 2>&1 | tail -10
```

**If cookies are valid:** Should return a URL starting with `http://` or `https://`
**If cookies are invalid:** Will show "Sign in to confirm you're not a bot"

## Step 4: Pull latest code and rebuild

```bash
cd /var/www/freereelsdownload
git pull origin main
npm run build
mkdir -p .next/standalone/.next/static/chunks
cp -r .next/static/* .next/standalone/.next/static/
pm2 restart freereelsdownload
```

## Step 5: Test API with cookies

```bash
curl -X POST http://localhost:3000/api/download \
  -H "Content-Type: application/json" \
  -d '{"url": "https://youtube.com/shorts/jNQXAC9IVRw", "format": "mp3"}' \
  2>&1 | grep -E "audioUrl|videoUrl|extractAudioFromVideo|error"
```

## Common Issues:

1. **Cookies file not in project root** - Must be at `/var/www/freereelsdownload/cookies.txt`
2. **Cookies expired** - Export fresh cookies from browser
3. **Wrong format** - Must be Netscape format (from extension)
4. **Permissions** - Use `chmod 600 cookies.txt`

---

**Run Steps 1-5 to verify cookies are working!**

